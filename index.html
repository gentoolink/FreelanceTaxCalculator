<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian Side Hustle & Freelancer Tax Calculator</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Applying a clean, modern font and a subtle background gradient */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light gray background */
            background-image: radial-gradient(circle at top left, #eff6ff, #f8fafc);
        }
        /* Custom focus ring color to match the theme */
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* Blue-500 with 50% opacity */
            border-color: #3b82f6; /* Blue-500 */
        }
        /* Style for the initially hidden results area */
        #results-container {
            display: none;
        }
    </style>
</head>
<body class="text-gray-800 antialiased">

    <!-- Main container with vertical padding -->
    <div class="container mx-auto px-4 py-8 md:py-12">

        <!-- Header Section -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-5xl font-extrabold text-gray-900 leading-tight">
                Canadian Side Hustle Tax Calculator
            </h1>
            <p class="mt-3 md:mt-4 max-w-2xl mx-auto text-lg text-gray-600">
                Estimate your self-employment taxes for your freelance or gig work. Based on 2024 CRA tax rates.
            </p>
        </header>

        <!-- Main content card -->
        <main class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="grid grid-cols-1 md:grid-cols-2">
                
                <!-- Form Section -->
                <div class="p-6 md:p-10">
                    <form id="tax-form">
                        <div class="space-y-6">
                            <div>
                                <label for="gross-income" class="block text-sm font-medium text-gray-700">Gross Side Hustle Income</label>
                                <div class="mt-1 relative rounded-md shadow-sm">
                                    <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <span class="text-gray-500 sm:text-sm">$</span>
                                    </div>
                                    <input type="number" name="gross-income" id="gross-income" class="form-input block w-full pl-7 pr-3 py-3 border-gray-300 rounded-md transition duration-150 ease-in-out sm:text-sm" placeholder="e.g., 25000" required step="100">
                                </div>
                            </div>
                            
                            <div>
                                <label for="business-expenses" class="block text-sm font-medium text-gray-700">Business Expenses</label>
                                <div class="mt-1 relative rounded-md shadow-sm">
                                    <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <span class="text-gray-500 sm:text-sm">$</span>
                                    </div>
                                    <input type="number" name="business-expenses" id="business-expenses" class="form-input block w-full pl-7 pr-3 py-3 border-gray-300 rounded-md transition duration-150 ease-in-out sm:text-sm" placeholder="e.g., 5000" required step="100">
                                </div>
                            </div>
                            
                            <div>
                                <label for="province" class="block text-sm font-medium text-gray-700">Province / Territory</label>
                                <select id="province" name="province" class="form-input mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 rounded-md transition duration-150 ease-in-out sm:text-sm" required>
                                    <option value="AB">Alberta</option>
                                    <option value="BC" selected>British Columbia</option>
                                    <option value="MB">Manitoba</option>
                                    <option value="NB">New Brunswick</option>
                                    <option value="NL">Newfoundland and Labrador</option>
                                    <option value="NS">Nova Scotia</option>
                                    <option value="NT">Northwest Territories</option>
                                    <option value="NU">Nunavut</option>
                                    <option value="ON">Ontario</option>
                                    <option value="PE">Prince Edward Island</option>
                                    <option value="QC">Quebec</option>
                                    <option value="SK">Saskatchewan</option>
                                    <option value="YT">Yukon</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-8">
                            <button type="submit" class="w-full bg-blue-600 text-white font-bold py-4 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-150 ease-in-out">
                                Calculate My Estimated Tax
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Results Section -->
                <div id="results-container" class="bg-gray-50 p-6 md:p-10 border-l border-gray-200">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Your Estimated Tax</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center text-gray-600">
                            <span>Net Profit (Taxable Income):</span>
                            <span id="net-profit-result" class="font-medium text-gray-900"></span>
                        </div>
                        <hr>
                        <div class="flex justify-between items-center text-gray-600">
                            <span>Estimated CPP/QPP:</span>
                            <span id="cpp-result" class="font-medium text-gray-900"></span>
                        </div>
                        <div class="flex justify-between items-center text-gray-600">
                            <span>Estimated Federal Tax:</span>
                            <span id="federal-tax-result" class="font-medium text-gray-900"></span>
                        </div>
                        <div class="flex justify-between items-center text-gray-600">
                            <span>Estimated Provincial Tax:</span>
                            <span id="provincial-tax-result" class="font-medium text-gray-900"></span>
                        </div>
                        <hr>
                        <div class="bg-blue-100 text-blue-800 p-4 rounded-lg mt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold">Total Estimated Tax:</span>
                                <span id="total-tax-result" class="text-2xl font-extrabold"></span>
                            </div>
                            <div class="text-center mt-2 text-sm font-medium">
                                Aim to save <span id="savings-rate-result" class="font-bold"></span> of your net profit for taxes.
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
        
        
        <!-- Explanation and Disclaimer Section -->
        <section class="max-w-4xl mx-auto mt-12 text-gray-600 text-sm">
             <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">How It's Calculated</h3>
                <p class="mb-4">This tool estimates your tax bill by calculating your Canada Pension Plan (CPP) or Quebec Pension Plan (QPP) contributions, and then applying the 2024 federal and provincial/territorial tax brackets to your net self-employment income (Gross Income minus Business Expenses). The Basic Personal Amount tax credit is factored into the calculation.</p>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Important Disclaimer</h3>
                <p>This calculator is for informational and estimation purposes only. Tax laws are complex and change regularly. This tool does not constitute financial, tax, or legal advice. Consult with a qualified professional accountant or tax advisor to understand your specific tax situation. We assume no liability for any actions taken based on the information provided by this tool.</p>
             </div>
        </section>

        <!-- Footer -->
        <footer class="text-center mt-12 pb-4">
            <p class="text-gray-500 text-sm">&copy; 2025 Side Hustle Tax Calculator. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        // All tax data is stored in this object for easy updates each year.
        const taxData2024 = {
            // Canada Pension Plan (CPP) and Quebec Pension Plan (QPP) data for 2024
            cpp: {
                rate: 0.119, // For self-employed (5.95% employee + 5.95% employer)
                qppRate: 0.128, // QPP rate is higher
                basicExemption: 3500,
                maxPensionable: 68500,
                cpp2Rate: 0.08, // Self-employed rate for second tier
                maxAdditionalPensionable: 73200,
            },
            // Federal Tax Brackets for 2024
            federal: {
                bpa: 15705, // Basic Personal Amount
                brackets: [
                    { limit: 55867, rate: 0.15 },
                    { limit: 111733, rate: 0.205 },
                    { limit: 173205, rate: 0.26 },
                    { limit: 246752, rate: 0.29 },
                    { limit: Infinity, rate: 0.33 }
                ]
            },
            // Provincial/Territorial Tax Brackets for 2024
            provinces: {
                AB: {
                    bpa: 21885,
                    brackets: [
                        { limit: 148269, rate: 0.10 },
                        { limit: 177922, rate: 0.12 },
                        { limit: 237230, rate: 0.13 },
                        { limit: 355845, rate: 0.14 },
                        { limit: Infinity, rate: 0.15 }
                    ]
                },
                BC: {
                    bpa: 12580,
                    brackets: [
                        { limit: 47937, rate: 0.0506 },
                        { limit: 95875, rate: 0.077 },
                        { limit: 110076, rate: 0.105 },
                        { limit: 133664, rate: 0.1229 },
                        { limit: 181232, rate: 0.147 },
                        { limit: 252752, rate: 0.168 },
                        { limit: Infinity, rate: 0.205 }
                    ]
                },
                MB: {
                    bpa: 15780,
                    brackets: [
                        { limit: 47000, rate: 0.108 },
                        { limit: 100000, rate: 0.1275 },
                        { limit: Infinity, rate: 0.174 }
                    ]
                },
                NB: {
                    bpa: 13043,
                    brackets: [
                        { limit: 49958, rate: 0.094 },
                        { limit: 99916, rate: 0.14 },
                        { limit: 185064, rate: 0.16 },
                        { limit: Infinity, rate: 0.195 }
                    ]
                },
                NL: {
                    bpa: 10818,
                    brackets: [
                        { limit: 43198, rate: 0.087 },
                        { limit: 86395, rate: 0.145 },
                        { limit: 154244, rate: 0.158 },
                        { limit: 215943, rate: 0.178 },
                        { limit: 275870, rate: 0.198 },
                        { limit: 551739, rate: 0.208 },
                        { limit: 1103478, rate: 0.213 },
                        { limit: Infinity, rate: 0.218 }
                    ]
                },
                NS: {
                    bpa: 8481, // Can go up to 11481 based on income
                    brackets: [
                        { limit: 29590, rate: 0.0879 },
                        { limit: 59180, rate: 0.1495 },
                        { limit: 93000, rate: 0.1667 },
                        { limit: 150000, rate: 0.175 },
                        { limit: Infinity, rate: 0.21 }
                    ]
                },
                NT: {
                    bpa: 17373,
                    brackets: [
                        { limit: 50597, rate: 0.059 },
                        { limit: 101198, rate: 0.086 },
                        { limit: 164525, rate: 0.122 },
                        { limit: Infinity, rate: 0.1405 }
                    ]
                },
                NU: {
                    bpa: 18767,
                    brackets: [
                        { limit: 53268, rate: 0.04 },
                        { limit: 106537, rate: 0.07 },
                        { limit: 173205, rate: 0.09 },
                        { limit: Infinity, rate: 0.115 }
                    ]
                },
                ON: {
                    bpa: 12399,
                    brackets: [
                        { limit: 51446, rate: 0.0505 },
                        { limit: 102894, rate: 0.0915 },
                        { limit: 150000, rate: 0.1116 },
                        { limit: 220000, rate: 0.1216 },
                        { limit: Infinity, rate: 0.1316 }
                    ]
                },
                PE: {
                    bpa: 13500,
                    brackets: [
                        { limit: 32656, rate: 0.0965 },
                        { limit: 64313, rate: 0.1363 },
                        { limit: Infinity, rate: 0.1665 }
                    ]
                },
                QC: {
                    bpa: 18056,
                    brackets: [
                        { limit: 51780, rate: 0.14 },
                        { limit: 103545, rate: 0.19 },
                        { limit: 126000, rate: 0.24 },
                        { limit: Infinity, rate: 0.2575 }
                    ]
                },
                SK: {
                    bpa: 18491,
                    brackets: [
                        { limit: 52057, rate: 0.105 },
                        { limit: 148734, rate: 0.125 },
                        { limit: Infinity, rate: 0.145 }
                    ]
                },
                YT: {
                    bpa: 15705, // Same as federal
                    brackets: [
                        { limit: 55867, rate: 0.064 },
                        { limit: 111733, rate: 0.09 },
                        { limit: 173205, rate: 0.109 },
                        { limit: 500000, rate: 0.128 },
                        { limit: Infinity, rate: 0.15 }
                    ]
                },
            }
        };

        const taxForm = document.getElementById('tax-form');
        
        taxForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent page from reloading
            
            // Get user inputs
            const grossIncome = parseFloat(document.getElementById('gross-income').value) || 0;
            const businessExpenses = parseFloat(document.getElementById('business-expenses').value) || 0;
            const province = document.getElementById('province').value;
            
            if (grossIncome < businessExpenses) {
                alert("Gross income must be greater than business expenses.");
                return;
            }

            const netIncome = grossIncome - businessExpenses;

            // Perform calculations
            const cpp = calculateCpp(netIncome, province);
            const federalTax = calculateProgressiveTax(netIncome, taxData2024.federal.brackets, taxData2024.federal.bpa);
            const provincialTax = calculateProgressiveTax(netIncome, taxData2024.provinces[province].brackets, taxData2024.provinces[province].bpa);

            const totalTax = cpp + federalTax + provincialTax;
            const savingsRate = netIncome > 0 ? (totalTax / netIncome) * 100 : 0;

            // Display results
            displayResults({
                netProfit: netIncome,
                cpp: cpp,
                federalTax: federalTax,
                provincialTax: provincialTax,
                totalTax: totalTax,
                savingsRate: savingsRate
            });
        });

        function calculateCpp(income, province) {
            const data = taxData2024.cpp;
            if (income <= data.basicExemption) {
                return 0;
            }

            const isQuebec = province === 'QC';
            const baseRate = isQuebec ? data.qppRate : data.rate;
            
            // Tier 1 CPP/QPP
            const contributoryIncomeTier1 = Math.min(income, data.maxPensionable) - data.basicExemption;
            const cppTier1 = contributoryIncomeTier1 > 0 ? contributoryIncomeTier1 * baseRate : 0;

            // Tier 2 CPP/QPP (CPP2)
            let cppTier2 = 0;
            if (income > data.maxPensionable) {
                const contributoryIncomeTier2 = Math.min(income, data.maxAdditionalPensionable) - data.maxPensionable;
                cppTier2 = contributoryIncomeTier2 * data.cpp2Rate;
            }

            return cppTier1 + cppTier2;
        }

        function calculateProgressiveTax(income, brackets, bpa) {
            const taxableIncome = Math.max(0, income - bpa);
            let tax = 0;
            let incomeTaxed = 0;

            for (const bracket of brackets) {
                if (taxableIncome > incomeTaxed) {
                    const taxableInBracket = Math.min(taxableIncome - incomeTaxed, bracket.limit - incomeTaxed);
                    tax += taxableInBracket * bracket.rate;
                    incomeTaxed += taxableInBracket;
                } else {
                    break;
                }
            }
            return tax;
        }
        
        function displayResults(results) {
            const formatter = new Intl.NumberFormat('en-CA', { style: 'currency', currency: 'CAD' });
            
            document.getElementById('net-profit-result').textContent = formatter.format(results.netProfit);
            document.getElementById('cpp-result').textContent = formatter.format(results.cpp);
            document.getElementById('federal-tax-result').textContent = formatter.format(results.federalTax);
            document.getElementById('provincial-tax-result').textContent = formatter.format(results.provincialTax);
            document.getElementById('total-tax-result').textContent = formatter.format(results.totalTax);
            document.getElementById('savings-rate-result').textContent = `${results.savingsRate.toFixed(1)}%`;

            // Animate the appearance of the results container
            const resultsContainer = document.getElementById('results-container');
            resultsContainer.style.display = 'block';
            resultsContainer.style.opacity = '0';
            setTimeout(() => {
                resultsContainer.style.transition = 'opacity 0.5s ease-in-out';
                resultsContainer.style.opacity = '1';
            }, 10);
        }

    </script>
</body>
</html>
